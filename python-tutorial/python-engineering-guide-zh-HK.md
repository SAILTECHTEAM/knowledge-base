# Python å·¥ç¨‹æŒ‡å—ï¼šç¾ä»£é–‹ç™¼å¯¦è¸

## ç›®éŒ„
1. [Python å·¥ç¨‹ç°¡ä»‹](#python-å·¥ç¨‹ç°¡ä»‹)
2. [é …ç›®åˆå§‹åŒ–èˆ‡é…ç½®](#é …ç›®åˆå§‹åŒ–èˆ‡é…ç½®)
3. [é–‹ç™¼ç’°å¢ƒç®¡ç†](#é–‹ç™¼ç’°å¢ƒç®¡ç†)
4. [ä»£ç¢¼è³ªé‡èˆ‡è¦ç¯„](#ä»£ç¢¼è³ªé‡èˆ‡è¦ç¯„)
5. [æ¸¬è©¦èˆ‡è³ªé‡ä¿éšœ](#æ¸¬è©¦èˆ‡è³ªé‡ä¿éšœ)
6. [ä¾è³´ç®¡ç†](#ä¾è³´ç®¡ç†)
7. [æŒçºŒé›†æˆèˆ‡éƒ¨ç½²](#æŒçºŒé›†æˆèˆ‡éƒ¨ç½²)
8. [æ–‡ä»¶èˆ‡ç¶­è­·](#æ–‡ä»¶èˆ‡ç¶­è­·)
9. [æ€§èƒ½èˆ‡å„ªåŒ–](#æ€§èƒ½èˆ‡å„ªåŒ–)
10. [å®‰å…¨æœ€ä½³å¯¦è¸](#å®‰å…¨æœ€ä½³å¯¦è¸)

---

## Python å·¥ç¨‹ç°¡ä»‹

### ä»€éº¼æ˜¯ Python å·¥ç¨‹ï¼Ÿ

Python å·¥ç¨‹æ¶µè“‹äº†ä½¿ç”¨ç¾ä»£å·¥å…·ã€å¯¦è¸å’Œæ–¹æ³•è«–ç³»çµ±æ€§åœ°é–‹ç™¼ã€éƒ¨ç½²å’Œç¶­è­· Python æ‡‰ç”¨çš„å…¨éç¨‹ã€‚å®ƒä¸åƒ…åƒ…æ˜¯ç·¨å¯« Python ä»£ç¢¼ï¼Œé‚„åŒ…æ‹¬å¾é …ç›®åˆå§‹åŒ–åˆ°ç”Ÿç”¢éƒ¨ç½²ã€é•·æœŸç¶­è­·çš„æ•´å€‹è»Ÿä»¶é–‹ç™¼ç”Ÿå‘½é€±æœŸã€‚

### æ ¸å¿ƒåŸå‰‡

| åŸå‰‡ | æè¿° | é‡è¦æ€§ |
|------|------|--------|
| **è‡ªå‹•åŒ–** | è‡ªå‹•åŒ–é‡è¤‡æ€§ä»»å‹™å’Œæµç¨‹ | é™ä½äººç‚ºéŒ¯èª¤ï¼Œæé«˜æ•ˆç‡ |
| **ä¸€è‡´æ€§** | ä½¿ç”¨æ¨™æº–åŒ–å·¥å…·å’Œå·¥ä½œæµ | æå‡åœ˜éšŠå”ä½œå’Œä»£ç¢¼è³ªé‡ |
| **å¯é‡ç¾æ€§** | ç¢ºä¿æ§‹å»ºå’Œç’°å¢ƒä¸€è‡´ | ä¾¿æ–¼å¯é éƒ¨ç½²å’Œèª¿è©¦ |
| **å¯æ“´å±•æ€§** | è¨­è¨ˆå¯æ“´å±•å’Œå¯ç¶­è­· | è®“ä»£ç¢¼åº«å…·å‚™æœªä¾†é©æ‡‰æ€§ |
| **å®‰å…¨æ€§** | å¾ä¸€é–‹å§‹å°±å¯¦æ–½å®‰å…¨æªæ–½ | é˜²æ­¢æ¼æ´å’Œæ•¸æ“šæ´©éœ² |

### å·¥ç¨‹åŒ– vs è…³æœ¬åŒ–

| æ–¹é¢ | è…³æœ¬åŒ– | å·¥ç¨‹åŒ– |
|------|--------|--------|
| **ç¯„åœ** | å–®ä¸€ç”¨é€”ï¼Œå°è¦æ¨¡ | è¤‡é›œç³»çµ±ï¼Œå¤§è¦æ¨¡ |
| **çµæ§‹** | ç°¡å–®ç·šæ€§ | æ¨¡çµ„åŒ–ã€çµ„ç¹”åŒ– |
| **æ¸¬è©¦** | æ¥µå°‘æˆ–ç„¡ | å®Œå–„æ¸¬è©¦é«”ç³» |
| **ä¾è³´** | æ‰‹å‹•ã€è‡¨æ™‚ | ç®¡ç†ã€ç‰ˆæœ¬åŒ– |
| **éƒ¨ç½²** | æ‰‹å‹•åŸ·è¡Œ | è‡ªå‹•åŒ–æµæ°´ç·š |
| **ç¶­è­·** | è¢«å‹• | ä¸»å‹• |

---

## é …ç›®åˆå§‹åŒ–èˆ‡é…ç½®

### ç¾ä»£é …ç›®çµæ§‹

ä¸€å€‹çµæ§‹åˆç†çš„ Python é …ç›®æ‡‰éµå¾ªå¦‚ä¸‹ç´„å®šï¼š

```
project-name/
â”œâ”€â”€ .gitignore              # Git å¿½ç•¥è¦å‰‡
â”œâ”€â”€ .python-version         # Python ç‰ˆæœ¬æŒ‡å®š
â”œâ”€â”€ pyproject.toml          # é …ç›®é…ç½®ï¼ˆğŸ”‘ è©³è¦‹å°ˆç”¨æŒ‡å—ï¼‰
â”œâ”€â”€ uv.lock                 # é€šç”¨é–æ–‡ä»¶ï¼ˆéœ€æäº¤åˆ° VCSï¼‰
â”œâ”€â”€ README.md               # é …ç›®æ–‡ä»¶
â”œâ”€â”€ CHANGELOG.md            # ç‰ˆæœ¬æ­·å²
â”œâ”€â”€ src/                    # æºä»£ç¢¼ï¼ˆæ¨è–¦å¸ƒå±€ï¼‰
â”‚   â””â”€â”€ project_name/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ main.py
â”‚       â””â”€â”€ modules/
â”œâ”€â”€ tests/                  # æ¸¬è©¦æ–‡ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_main.py
â”‚   â””â”€â”€ conftest.py
â”œâ”€â”€ docs/                   # æ–‡ä»¶æºç¢¼
â”‚   â”œâ”€â”€ conf.py
â”‚   â””â”€â”€ index.md
â”œâ”€â”€ scripts/                # å·¥å…·è…³æœ¬
â”œâ”€â”€ .github/                # CI/CD å·¥ä½œæµ
â”‚   â””â”€â”€ workflows/
â””â”€â”€ requirements/           # å‚³çµ±ä¾è³´æ–‡ä»¶ï¼ˆå¦‚æœ‰éœ€è¦ï¼‰
    â”œâ”€â”€ base.txt
    â””â”€â”€ dev.txt
```

### é…ç½®æ–‡ä»¶æ¦‚è¦½

| æ–‡ä»¶ | ä½œç”¨ | ç®¡ç†æ–¹å¼ |
|------|------|----------|
| **pyproject.toml** | ğŸ¯ **æ ¸å¿ƒé…ç½®æ–‡ä»¶** | [å®Œæ•´æŒ‡å— â†’](pyproject-guide-zh-HK.md) |
| **requirements.txt** | å‚³çµ±ä¾è³´åˆ—è¡¨ | ç”¨ `uv pip compile` ç”Ÿæˆ |
| **Pipfile/Poetry.lock** | å…¶ä»–é–æ–‡ä»¶ | é·ç§»åˆ° uv.lock |
| **setup.py/setup.cfg** | å‚³çµ±æ§‹å»ºè…³æœ¬ | é·ç§»åˆ° pyproject.toml |
| **tox.ini** | æ¸¬è©¦é…ç½® | åˆä½µåˆ° pyproject.toml |

### é …ç›®å…ƒæ•¸æ“šç¤ºä¾‹

```toml
[project]
name = "your-project"
version = "1.0.0"
description = "é …ç›®ç°¡è¦æè¿°"
readme = "README.md"
license = {text = "MIT"}
authors = [
    {name = "ä½ çš„åå­—", email = "your.email@example.com"}
]
maintainers = [
    {name = "ç¶­è­·è€…", email = "maintainer@example.com"}
]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
]
keywords = ["python", "engineering", "best-practices"]
requires-python = ">=3.8"
```

> **ğŸ“– æ·±å…¥é–±è®€**ï¼šå®Œæ•´ pyproject.toml é…ç½®è©³è¦‹ [pyproject.toml å®Œæ•´æŒ‡å—](pyproject-guide-zh-HK.md)

---

## é–‹ç™¼ç’°å¢ƒç®¡ç†

### Python ç‰ˆæœ¬ç®¡ç†

| å·¥å…· | æ–¹å¼ | æ¨è–¦ |
|------|------|------|
| **uv python** | èˆ‡ uv é›†æˆ | âœ… **æ¨è–¦** |
| **pyenv** | ç¨ç«‹ç‰ˆæœ¬ç®¡ç†å™¨ | âœ… å¯é¸ |
| **ç³»çµ± Python** | æ“ä½œç³»çµ±è‡ªå¸¶ | âš ï¸ ä¸æ¨è–¦é–‹ç™¼ä½¿ç”¨ |
| **conda** | ç’°å¢ƒ+ç‰ˆæœ¬ç®¡ç† | âœ… æ•¸æ“šç§‘å­¸é©ç”¨ |

#### uv Python ç®¡ç†ç¤ºä¾‹

```bash
# å®‰è£ Python ç‰ˆæœ¬
uv python install 3.11 3.12

# åˆ—å‡ºå¯ç”¨ç‰ˆæœ¬
uv python list

# å›ºå®šé …ç›® Python ç‰ˆæœ¬
uv python pin 3.11

# ç”¨æŒ‡å®šç‰ˆæœ¬å‰µå»ºç’°å¢ƒ
uv venv --python 3.11
```

### è™›æ“¬ç’°å¢ƒç­–ç•¥

| ç­–ç•¥ | å‘½ä»¤ | ä½¿ç”¨å ´æ™¯ |
|------|------|----------|
| **è‡ªå‹•ç®¡ç†** | `uv run script.py` | âœ… **æ¨è–¦**æ—¥å¸¸é–‹ç™¼ |
| **é¡¯å¼ venv** | `uv venv && source .venv/bin/activate` | å‚³çµ±å·¥ä½œæµ |
| **å¤šç’°å¢ƒ** | `uv venv .venv-dev`, `uv venv .venv-test` | éš”é›¢ç’°å¢ƒ |
| **å®¹å™¨åŒ–** | Docker + uv | ç”Ÿç”¢/éƒ¨ç½² |

### ç’°å¢ƒéš”é›¢æœ€ä½³å¯¦è¸

1. **é–‹ç™¼çµ•ä¸ä½¿ç”¨ç³»çµ± Python**
2. **å°‡ `.python-version` æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶**
3. **ä½¿ç”¨ç’°å¢ƒåˆ†çµ„ç®¡ç†ä¾è³´**
4. **CI/CD è‡ªå‹•åŒ–ç’°å¢ƒåˆå§‹åŒ–**
5. **æ¸…æ™°è¨˜éŒ„ç’°å¢ƒéœ€æ±‚**

> **ğŸ“– æ·±å…¥é–±è®€**ï¼šuv ç”¨æ³•è©³è¦‹ [uv å®Œæ•´æŒ‡å—](uv-guide-zh-HK.md)

---

## ä»£ç¢¼è³ªé‡èˆ‡è¦ç¯„

### ç¾ä»£ä»£ç¢¼è³ªé‡å·¥å…·æ£§

| é¡åˆ¥ | ç¾ä»£å·¥å…· | å‚³çµ±å·¥å…· | å„ªå‹¢ |
|------|----------|---------|------|
| **Lint** | Ruff | Pylint, Flake8 | 10-100å€é€Ÿåº¦ï¼Œè¦å‰‡å…¨é¢ |
| **æ ¼å¼åŒ–** | Ruff Format | Black, autopep8 | èˆ‡ linter ä¸€é«”ï¼Œå¿« |
| **é¡å‹æª¢æŸ¥** | MyPy | ç„¡éœ€ | éœæ…‹é¡å‹é©—è­‰ |
| **å°å…¥æ’åº** | Ruff | isort | Ruff å…§ç½® |
| **å®‰å…¨** | Ruff (bandit) | bandit, safety | é›†æˆæ›´å¿« |

### ä»£ç¢¼è³ªé‡å¯¦ç¾

#### pyproject.toml å®Œæ•´é…ç½®

```toml
[tool.ruff]
line-length = 88
target-version = "py38"

[tool.ruff.lint]
select = ["E", "F", "W", "I", "N", "B", "C90", "UP", "S"]
ignore = ["E501", "B008"]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401"]
"tests/*" = ["S101"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
line-ending = "auto"

[tool.mypy]
python_version = "3.8"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
```

### Pre-commit é›†æˆ

```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.1.0
    hooks:
      - id: ruff
        args: [--fix]
      - id: ruff-format

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.0.0
    hooks:
      - id: mypy
        additional_dependencies: [types-requests]
```

### CI/CD è³ªé‡é–€æª»

```yaml
# GitHub Actions
- name: ä»£ç¢¼è³ªé‡æª¢æŸ¥
  run: |
    uv run ruff check src/
    uv run ruff format --check src/
    uv run mypy src/
    uv run pytest --cov=src --cov-fail-under=80
```

> **ğŸ“– æ·±å…¥é–±è®€**ï¼šå·¥å…·å°æ¯”è©³è¦‹ [Python ä»£ç¢¼è³ªé‡å·¥å…·ç°¡ä»‹](python-tools-introduction-zh-HK.md)

---

## æ¸¬è©¦èˆ‡è³ªé‡ä¿éšœ

### æ¸¬è©¦é‡‘å­—å¡”

| å±¤ç´š | ç›®çš„ | å·¥å…· | è¦†è“‹ç›®æ¨™ |
|------|------|------|----------|
| **å–®å…ƒæ¸¬è©¦** | æ¸¬è©¦å–®å€‹å‡½æ•¸/æ–¹æ³• | pytest, unittest | 80-90%+ |
| **é›†æˆæ¸¬è©¦** | æ¸¬è©¦çµ„ä»¶äº¤äº’ | pytest, testcontainers | 60-70% |
| **ç«¯åˆ°ç«¯æ¸¬è©¦** | æ¸¬è©¦å®Œæ•´æµç¨‹ | playwright, selenium | 20-30% |
| **æ€§èƒ½æ¸¬è©¦** | é—œéµè·¯å¾‘åŸºæº– | pytest-benchmark, locust | é—œéµæŒ‡æ¨™ |

### ç¾ä»£æ¸¬è©¦é…ç½®

#### pytest é…ç½® (pyproject.toml)

```toml
[tool.pytest.ini_options]
minversion = "7.0"
addopts = ["-ra", "-q", "--strict-markers", "--strict-config", "--cov=src", "--cov-report=term-missing", "--cov-report=html", "--cov-report=xml", "--cov-fail-under=80"]
testpaths = ["tests"]
python_files = ["test_*.py", "*_test.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
markers = ["slow: æ¨™è¨˜æ…¢æ¸¬è©¦", "integration: æ¨™è¨˜é›†æˆæ¸¬è©¦", "unit: æ¨™è¨˜å–®å…ƒæ¸¬è©¦", "network: æ¨™è¨˜éœ€ç¶²çµ¡", "flaky: æ¨™è¨˜ä¸ç©©å®šæ¸¬è©¦"]
```

#### æ¸¬è©¦çµæ§‹ç¤ºä¾‹

```
tests/
â”œâ”€â”€ conftest.py              # pytest é…ç½®èˆ‡å¤¾å…·
â”œâ”€â”€ unit/                    # å–®å…ƒæ¸¬è©¦
â”‚   â”œâ”€â”€ test_models.py
â”‚   â””â”€â”€ test_utils.py
â”œâ”€â”€ integration/             # é›†æˆæ¸¬è©¦
â”‚   â”œâ”€â”€ test_api.py
â”‚   â””â”€â”€ test_database.py
â”œâ”€â”€ e2e/                     # ç«¯åˆ°ç«¯æ¸¬è©¦
â”‚   â””â”€â”€ test_workflows.py
â””â”€â”€ fixtures/                # æ¸¬è©¦æ•¸æ“šèˆ‡ mock
    â”œâ”€â”€ sample_data.json
    â””â”€â”€ mock_responses.py
```

### è³ªé‡ä¿éšœå¯¦è¸

#### 1. æ¸¬è©¦é©…å‹•é–‹ç™¼ (TDD)

```bash
# TDD æµç¨‹
# 1. å¯«å¤±æ•—æ¸¬è©¦
# 2. ç·¨å¯«é€šéæ¸¬è©¦çš„æœ€å°ä»£ç¢¼
# 3. é‡æ§‹
# 4. å¾ªç’°

# æŒçºŒé‹è¡Œæ¸¬è©¦
uv run pytest --watch src/ tests/
```

#### 2. æ€§è³ªæ¸¬è©¦ï¼ˆå±¬æ€§æ¸¬è©¦ï¼‰

```python
import hypothesis
from hypothesis import strategies as st

@given(st.integers(min_value=0, max_value=100))
def test_additive_identity(x):
    assert x + 0 == x

@given(st.lists(st.integers()))
def test_sort_preserves_elements(lst):
    sorted_lst = sorted(lst)
    assert sorted(lst).count == lst.count
```

#### 3. è®Šç•°æ¸¬è©¦

```bash
# å®‰è£ mutmut
uv add --dev mutmut

# é‹è¡Œè®Šç•°æ¸¬è©¦
uv run mutmut run --paths-to-mutate src/

# é«˜è®Šç•°åˆ†æ•¸è¡¨ç¤ºæ¸¬è©¦è¦†è“‹å¥½
```

---

## ä¾è³´ç®¡ç†

### uv çš„ç¾ä»£ä¾è³´ç®¡ç†

| åŠŸèƒ½ | å‚³çµ±ï¼ˆpipï¼‰ | ç¾ä»£ï¼ˆuvï¼‰ |
|------|-------------|------------|
| **å®‰è£é€Ÿåº¦** | æ…¢ï¼ˆç§’ç´šï¼‰ | å¿«ï¼ˆæ¯«ç§’ç´šï¼‰ |
| **ä¾è³´è§£æ** | åŸºç¤è§£æå™¨ | é«˜ç´šè§£æå™¨ |
| **é–æ–‡ä»¶** | requirements.txt | é€šç”¨ uv.lock |
| **ç’°å¢ƒç®¡ç†** | å¤šå·¥å…·åˆ†é›¢ | ä¸€é«”åŒ– |
| **è·¨å¹³å°** | å¹³å°ç›¸é—œ | é€šç”¨é–æ–‡ä»¶ |

### ä¾è³´åˆ†é¡

#### ç”Ÿç”¢ä¾è³´
```bash
# æ·»åŠ ç”Ÿç”¢ä¾è³´
uv add requests fastapi sqlalchemy
uv add 'requests>=2.28.0,<3.0.0'  # ç‰ˆæœ¬ç´„æŸ
uv add 'fastapi[all]'             # å« extras
```

#### é–‹ç™¼ä¾è³´
```bash
# æ·»åŠ é–‹ç™¼å·¥å…·
uv add --dev pytest black ruff mypy
uv add --group test pytest-cov
uv add --group docs sphinx
```

#### å¯é¸ä¾è³´
```toml
[project.optional-dependencies]
dev = ["pytest>=7.0.0", "black>=23.0.0", "ruff>=0.1.0", "mypy>=1.0.0"]
docs = ["sphinx>=5.0.0", "sphinx-rtd-theme>=1.0.0"]
test = ["pytest>=7.0.0", "pytest-cov>=4.0.0", "pytest-xdist>=3.0.0"]
```

### é–æ–‡ä»¶ç®¡ç†

```bash
# å‰µå»º/æ›´æ–°é–æ–‡ä»¶
uv lock

# æ›´æ–°æŒ‡å®šåŒ…
uv lock --upgrade-package requests

# åˆ·æ–°é–æ–‡ä»¶ï¼ˆå¿½ç•¥ç·©å­˜ï¼‰
uv lock --refresh

# æª¢æŸ¥éæœŸåŒ…
uv tree --outdated
```

### å®‰å…¨æƒæ

```bash
# æª¢æŸ¥å·²çŸ¥æ¼æ´
uv pip check

# CI é›†æˆå®‰å…¨æƒæ
- name: å®‰å…¨æƒæ
  run: |
    uv pip check
    uv pip list --format json | uv pip audit --require-from -
```

---

## æŒçºŒé›†æˆèˆ‡éƒ¨ç½²

### CI/CD æµæ°´ç·šçµæ§‹

```mermaid
graph LR
    A[Push] --> B[Lint]
    B --> C[Test]
    C --> D[Security]
    D --> E[Build]
    E --> F[Deploy Staging]
    F --> G[Integration Tests]
    G --> H[Deploy Production]
```

### GitHub Actions æœ€ä½³å¯¦è¸

#### å®Œæ•´ CI å·¥ä½œæµ

```yaml
name: Python CI/CD

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.8", "3.9", "3.10", "3.11", "3.12"]
    steps:
      - uses: actions/checkout@v4
      - name: è¨­ç½® uv
        uses: astral-sh/setup-uv@v3
        with:
          version: "latest"
      - name: è¨­ç½® Python ${{ matrix.python-version }}
        run: uv python install ${{ matrix.python-version }}
      - name: ç·©å­˜ä¾è³´
        uses: actions/cache@v3
        with:
          path: ~/.cache/uv
          key: ${{ runner.os }}-uv-${{ hashFiles('pyproject.toml', 'uv.lock') }}
      - name: å®‰è£ä¾è³´
        run: uv sync --all-extras
      - name: ä»£ç¢¼è³ªé‡æª¢æŸ¥
        run: |
          uv run ruff check src/
          uv run ruff format --check src/
          uv run mypy src/
      - name: é‹è¡Œæ¸¬è©¦
        run: |
          uv run pytest --cov=src --cov-report=xml
      - name: ä¸Šå‚³è¦†è“‹ç‡
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage.xml
  security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: astral-sh/setup-uv@v3
      - name: å®‰å…¨å¯©è¨ˆ
        run: |
          uv sync
          uv pip check
          uv pip list --format json | uv pip audit --require-from -
  build:
    needs: [test, security]
    runs-on: ubuntu-latest
    if: github.event_name == 'push'
    steps:
      - uses: actions/checkout@v4
      - uses: astral-sh/setup-uv@v3
      - name: æ§‹å»ºåˆ†ç™¼åŒ…
        run: uv build
      - name: å­˜å„²æ§‹å»ºç”¢ç‰©
        uses: actions/upload-artifact@v3
        with:
          name: dist
          path: dist/
  publish:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - uses: actions/checkout@v4
      - uses: astral-sh/setup-uv@v3
      - name: ä¸‹è¼‰ç”¢ç‰©
        uses: actions/download-artifact@v3
        with:
          name: dist
          path: dist/
      - name: ç™¼ä½ˆåˆ° PyPI
        run: uv publish
        env:
          UV_PUBLISH_TOKEN: ${{ secrets.PYPI_TOKEN }}
```

### éƒ¨ç½²ç­–ç•¥

| ç­–ç•¥ | æè¿° | é©ç”¨å ´æ™¯ |
|------|------|----------|
| **è—ç¶ éƒ¨ç½²** | å…©å¥—ç’°å¢ƒåˆ‡æ› | é›¶åœæ©Ÿéƒ¨ç½² |
| **é‡‘çµ²é›€** | éƒ¨åˆ†ç”¨æˆ¶æ¼¸é€²ç™¼ä½ˆ | é¢¨éšªç™¼ä½ˆ |
| **æ»¾å‹•æ›´æ–°** | é€æ­¥æ›¿æ›å¯¦ä¾‹ | æœ‰ç‹€æ…‹æ‡‰ç”¨ |
| **GitOps** | Git é©…å‹•éƒ¨ç½² | é›²åŸç”Ÿ/Kubernetes |

### ç›£æ§èˆ‡å¯è§€æ¸¬æ€§

#### æ‡‰ç”¨ç›£æ§ç¤ºä¾‹

```python
# çµæ§‹åŒ–æ—¥èªŒ
import logging
import json
from datetime import datetime

class StructuredLogger:
    def __init__(self, name: str):
        self.logger = logging.getLogger(name)
    def log_event(self, event: str, level: str = "INFO", **kwargs):
        log_data = {
            "timestamp": datetime.utcnow().isoformat(),
            "event": event,
            "level": level,
            **kwargs
        }
        getattr(self.logger, level.lower())(json.dumps(log_data))

# ç”¨æ³•
logger = StructuredLogger(__name__)
logger.log_event("user_login", user_id="123", ip="192.168.1.1")
```

---

## æ–‡ä»¶èˆ‡ç¶­è­·

### æ–‡ä»¶ç­–ç•¥

| é¡å‹ | ä½œç”¨ | å·¥å…· | ä½ç½® |
|------|------|------|------|
| **API æ–‡ä»¶** | ä»£ç¢¼åƒè€ƒ | Sphinx, pdoc | docs/api/ |
| **ç”¨æˆ¶æŒ‡å—** | ä½¿ç”¨æ•™å­¸ | MkDocs, GitBook | docs/guide/ |
| **æ¶æ§‹æ–‡ä»¶** | ç³»çµ±è¨­è¨ˆ | Markdown, åœ–ç¤º | docs/architecture/ |
| **è®Šæ›´æ—¥èªŒ** | ç‰ˆæœ¬æ­·å² | Towncrier, æ‰‹å·¥ | CHANGELOG.md |
| **è²¢ç»æŒ‡å—** | é–‹ç™¼æµç¨‹ | Markdown | CONTRIBUTING.md |

### æ–‡ä»¶è‡ªå‹•åŒ–

#### Sphinx é…ç½®

```toml
[tool.sphinx]
source-dir = "docs"
build-dir = "docs/_build"

[tool.sphinx.config]
project = "My Project"
author = "ä½ çš„åå­—"
release = "1.0.0"
extensions = ["sphinx.ext.autodoc", "sphinx.ext.viewcode", "sphinx.ext.napoleon", "myst_parser"]
html_theme = "sphinx_rtd_theme"
```

#### CI è‡ªå‹•åŒ–æ–‡ä»¶

```yaml
- name: æ§‹å»ºæ–‡ä»¶
  run: |
    uv add --group docs sphinx sphinx-rtd-theme
    uv run sphinx-build -b html docs/ docs/_build/
- name: éƒ¨ç½²æ–‡ä»¶
  if: github.ref == 'refs/heads/main'
  uses: peaceiris/actions-gh-pages@v3
  with:
    github_token: ${{ secrets.GITHUB_TOKEN }}
    publish_dir: ./docs/_build/
```

### ç¶­è­·å¯¦è¸

#### 1. å®šæœŸæ›´æ–°

```bash
# æª¢æŸ¥éæœŸä¾è³´
uv tree --outdated
# å®‰å…¨æ›´æ–°ä¾è³´
uv lock --upgrade
# äº¤äº’å¼ä¾è³´å¯©æŸ¥
pip-review --interactive
```

#### 2. ä¾è³´å¥åº·ç›£æ§

```yaml
# æ¯é€±ä¾è³´æª¢æŸ¥
name: Dependency Health
on:
  schedule:
    - cron: "0 0 * * 1"  # æ¯é€±ä¸€
jobs:
  dependency-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: astral-sh/setup-uv@v3
      - name: æª¢æŸ¥ä¾è³´
        run: |
          uv sync
          uv pip check
          pip-audit --requirement uv.lock
```

#### 3. æ€§èƒ½ç›£æ§

```python
# æ€§èƒ½åŸºæº–æ¸¬è©¦
import pytest
import time

@pytest.mark.performance
def test_api_response_time():
    start_time = time.time()
    response = api_call()
    response_time = time.time() - start_time
    assert response_time < 0.1, f"éŸ¿æ‡‰éæ…¢: {response_time}s"
```

---

## æ€§èƒ½èˆ‡å„ªåŒ–

### Python æ‡‰ç”¨æ€§èƒ½åˆ†æ

| å·¥å…· | ç”¨é€” | é›†æˆæ–¹å¼ |
|------|------|----------|
| **cProfile** | å…§ç½®åˆ†æ | `python -m cProfile script.py` |
| **py-spy** | ç”Ÿç”¢åˆ†æ | å–æ¨£åˆ†æå™¨ |
| **memory-profiler** | è¨˜æ†¶é«”åˆ†æ | è¡Œç´šè¨˜æ†¶é«” |
| **line-profiler** | CPU ç†±é»åˆ†æ | è¡Œç´šæ™‚é–“ |

#### æ€§èƒ½æ¸¬è©¦è¨­ç½®

```python
# conftest.py
import pytest
import time

@pytest.fixture
def benchmark():
    """ç°¡å–®åŸºæº–å¤¾å…·"""
    def _benchmark(func, *args, iterations=1000, **kwargs):
        start = time.perf_counter()
        for _ in range(iterations):
            func(*args, **kwargs)
        end = time.perf_counter()
        return (end - start) / iterations
    return _benchmark

# test_performance.py
def test_function_performance(benchmark):
    avg_time = benchmark(my_function, test_data)
    assert avg_time < 0.001, f"å‡½æ•¸éæ…¢: {avg_time:.6f}s"
```

### å„ªåŒ–ç­–ç•¥

#### 1. æ¼”ç®—æ³•å„ªåŒ–

```python
# å‰: O(nÂ²) å·¢ç‹€è¿´åœˆ
def find_duplicates_slow(items):
    duplicates = []
    for i, item1 in enumerate(items):
        for j, item2 in enumerate(items[i+1:], i+1):
            if item1 == item2 and item1 not in duplicates:
                duplicates.append(item1)
    return duplicates

# å¾Œ: O(n) ç”¨é›†åˆ
def find_duplicates_fast(items):
    seen = set()
    duplicates = set()
    for item in items:
        if item in seen:
            duplicates.add(item)
        seen.add(item)
    return list(duplicates)
```

#### 2. è¨˜æ†¶é«”å„ªåŒ–

```python
# è¨˜æ†¶é«”é«˜æ•ˆè™•ç†å¤§æ–‡ä»¶
def process_large_file(filename):
    """ä¸åŠ è¼‰åˆ°è¨˜æ†¶é«”è™•ç†å¤§æ–‡ä»¶"""
    with open(filename, 'r') as f:
        for line in f:
            yield process_line(line)

# ç”Ÿæˆå™¨è¡¨é”å¼ vs åˆ—è¡¨æ¨å°
# ä¸æ¨è–¦: å…¨éƒ¨åŠ è¼‰åˆ°è¨˜æ†¶é«”
squares = [x**2 for x in range(1000000)]
# æ¨è–¦: ç”Ÿæˆå™¨ï¼Œæœ€å°è¨˜æ†¶é«”
squares = (x**2 for x in range(1000000))
```

#### 3. ç·©å­˜ç­–ç•¥

```python
from functools import lru_cache
import joblib
import diskcache as dc

# è¨˜æ†¶é«”ç·©å­˜
@lru_cache(maxsize=128)
def expensive_computation(x, y):
    return complex_calculation(x, y)

# ç£ç›¤ç·©å­˜
cache = dc.Cache('./cache_dir')
@cache.memoize()
def large_computation(data):
    result = process_large_data(data)
    return result

# joblib å‡½æ•¸ç·©å­˜
@joblib.Memory('./joblib_cache', verbose=0).cache
def ml_model_prediction(features):
    model = load_model()
    return model.predict(features)
```

---

## å®‰å…¨æœ€ä½³å¯¦è¸

### å®‰å…¨æª¢æŸ¥è¡¨

| é¡åˆ¥ | å¯¦è¸ | å¯¦ç¾æ–¹å¼ |
|------|------|----------|
| **ä¾è³´** | å®šæœŸå®‰å…¨å¯©è¨ˆ | `uv pip audit`, Dependabot |
| **è¼¸å…¥æ ¡é©—** | æ‰€æœ‰è¼¸å…¥éƒ½éœ€æ ¡é©— | Pydantic, validators |
| **èªè­‰** | ä½¿ç”¨å®‰å…¨èªè­‰æ¨¡å¼ | JWT, OAuth2 |
| **æ•¸æ“šä¿è­·** | åŠ å¯†æ•æ„Ÿæ•¸æ“š | cryptography, Fernet |
| **ç’°å¢ƒè®Šé‡** | ä¸æäº¤å¯†é‘° | `.env` æ–‡ä»¶ã€å¯†é‘°åº« |
| **éŒ¯èª¤è™•ç†** | ä¸æš´éœ²å…§éƒ¨ä¿¡æ¯ | è‡ªå®šç¾©éŒ¯èª¤é  |
| **HTTPS** | å¼·åˆ¶ TLS | è­‰æ›¸ã€HSTS |

### å®‰å…¨å¯¦ç¾ç¤ºä¾‹

#### Pydantic è¼¸å…¥æ ¡é©—

```python
from pydantic import BaseModel, EmailStr, validator
import re

class UserRegistration(BaseModel):
    username: str
    email: EmailStr
    password: str
    @validator('username')
    def validate_username(cls, v):
        if len(v) < 3 or len(v) > 20:
            raise ValueError('ç”¨æˆ¶åéœ€ 3-20 å­—ç¬¦')
        if not re.match(r'^[a-zA-Z0-9_]+$', v):
            raise ValueError('ç”¨æˆ¶ååªèƒ½åŒ…å«å­—æ¯ã€æ•¸å­—å’Œä¸‹åŠƒç·š')
        return v
    @validator('password')
    def validate_password(cls, v):
        if len(v) < 8:
            raise ValueError('å¯†ç¢¼è‡³å°‘ 8 ä½')
        if not re.search(r'[A-Z]', v):
            raise ValueError('å¯†ç¢¼éœ€åŒ…å«å¤§å¯«å­—æ¯')
        if not re.search(r'[a-z]', v):
            raise ValueError('å¯†ç¢¼éœ€åŒ…å«å°å¯«å­—æ¯')
        if not re.search(r'\d', v):
            raise ValueError('å¯†ç¢¼éœ€åŒ…å«æ•¸å­—')
        return v
```

#### å®‰å…¨é…ç½®ç®¡ç†

```python
import os
from typing import Optional
from cryptography.fernet import Fernet

class SecureConfig:
    def __init__(self):
        self._encryption_key = self._load_or_create_key()
        self._cipher = Fernet(self._encryption_key)
    def _load_or_create_key(self) -> bytes:
        key_file = os.environ.get('ENCRYPTION_KEY_FILE', '.encryption_key')
        if os.path.exists(key_file):
            with open(key_file, 'rb') as f:
                return f.read()
        else:
            key = Fernet.generate_key()
            with open(key_file, 'wb') as f:
                f.write(key)
            os.chmod(key_file, 0o600)
            return key
    def encrypt_sensitive_data(self, data: str) -> str:
        return self._cipher.encrypt(data.encode()).decode()
    def decrypt_sensitive_data(self, encrypted_data: str) -> str:
        return self._cipher.decrypt(encrypted_data.encode()).decode()
    def get_database_url(self) -> str:
        encrypted_url = os.environ.get('DATABASE_URL_ENCRYPTED')
        if encrypted_url:
            return self.decrypt_sensitive_data(encrypted_url)
        raise ValueError("æœªæ‰¾åˆ°æˆ–æœªåŠ å¯†æ•¸æ“šåº« URL")
```

#### å®‰å…¨é ­ä¸­é–“ä»¶

```python
from fastapi import FastAPI, Request
from fastapi.middleware.cors import CORSMiddleware
from fastapi.middleware.trustedhost import TrustedHostMiddleware

app = FastAPI()

@app.middleware("http")
async def add_security_headers(request: Request, call_next):
    response = await call_next(request)
    response.headers["X-Content-Type-Options"] = "nosniff"
    response.headers["X-Frame-Options"] = "DENY"
    response.headers["X-XSS-Protection"] = "1; mode=block"
    response.headers["Strict-Transport-Security"] = "max-age=31536000; includeSubDomains"
    response.headers["Content-Security-Policy"] = "default-src 'self'"
    return response

app.add_middleware(
    TrustedHostMiddleware, 
    allowed_hosts=["yourdomain.com", "*.yourdomain.com"]
)
app.add_middleware(
    CORSMiddleware,
    allow_origins=["https://yourdomain.com"],
    allow_credentials=True,
    allow_methods=["GET", "POST"],
    allow_headers=["*"],
)
```

### å®‰å…¨æ¸¬è©¦

```python
import pytest
from fastapi.testclient import TestClient
from your_app import app

client = TestClient(app)

def test_sql_injection_protection():
    """SQL æ³¨å…¥é˜²è­·æ¸¬è©¦"""
    malicious_input = "'; DROP TABLE users; --"
    response = client.post("/search", json={"query": malicious_input})
    assert response.status_code != 500
    assert "error" in response.json().lower()

def test_xss_protection():
    """XSS é˜²è­·æ¸¬è©¦"""
    xss_payload = "<script>alert('xss')</script>"
    response = client.post("/comment", json={"text": xss_payload})
    assert "<script>" not in response.text

def test_rate_limiting():
    """é™æµæ¸¬è©¦"""
    for _ in range(100):
        response = client.post("/api/endpoint")
    assert response.status_code == 429
```

---

## è³‡æºéˆæ¥èˆ‡æ“´å±•é–±è®€

### å®˜æ–¹æ–‡ä»¶

| ä¸»é¡Œ | è³‡æº | éˆæ¥ |
|------|------|------|
| **Python æ‰“åŒ…** | æ‰“åŒ…ç”¨æˆ¶æŒ‡å— | https://packaging.python.org/ |
| **PEP æ¨™æº–** | Python å¢å¼·ææ¡ˆ | https://peps.python.org/ |
| **uv æ–‡ä»¶** | å®˜æ–¹ uv æŒ‡å— | https://docs.astral.sh/uv/ |
| **Ruff æ–‡ä»¶** | å®˜æ–¹ Ruff æŒ‡å— | https://docs.astral.sh/ruff/ |
| **pytest æ–‡ä»¶** | pytest æ¸¬è©¦æŒ‡å— | https://docs.pytest.org/ |
| **MyPy æ–‡ä»¶** | éœæ…‹é¡å‹æª¢æŸ¥ | https://mypy.readthedocs.io/ |

### æœ¬å€‰åº«å°ˆç”¨æŒ‡å—

| æŒ‡å— | é‡é» | éˆæ¥ |
|------|------|------|
| **[pyproject.toml æŒ‡å—](pyproject-guide-zh-HK.md)** | é …ç›®å®Œæ•´é…ç½® | ğŸ”— æœ¬åœ° |
| **[uv æŒ‡å—](uv-guide-zh-HK.md)** | ç¾ä»£ä¾è³´ç®¡ç† | ğŸ”— æœ¬åœ° |
| **[ä»£ç¢¼è³ªé‡å·¥å…·](python-tools-introduction-zh-HK.md)** | Lintã€æ ¼å¼åŒ–ã€é¡å‹æª¢æŸ¥ | ğŸ”— æœ¬åœ° |

### ç¤¾å€è³‡æº

| è³‡æº | é¡å‹ | æè¿° |
|------|------|------|
| **Python Discourse** | ç¤¾å€è«–å£‡ | å®˜æ–¹ Python è¨è«–å€ |
| **Reddit r/Python** | ç¤¾å€ | Python æ–°èèˆ‡è¨è«– |
| **Real Python** | æ•™å­¸ | æ·±åº¦ Python æ•™å­¸ |
| **Python Weekly** | å‘¨å ± | æ¯é€± Python æ–°èèˆ‡æ–‡ç«  |
| **Talk Python Podcast** | æ’­å®¢ | Python è¨ªè«‡èˆ‡è¨è«– |

### æ›¸ç±èˆ‡èª²ç¨‹

| è³‡æº | é›£åº¦ | é‡é» |
|------|------|------|
| **Effective Python** | ä¸­ç´š | æœ€ä½³å¯¦è¸èˆ‡æ…£ç”¨æ³• |
| **Fluent Python** | é«˜ç´š | æ·±å…¥ Python å…§éƒ¨ |
| **Architecture Patterns with Python** | é«˜ç´š | ç³»çµ±è¨­è¨ˆæ¨¡å¼ |
| **Python for DevOps** | ä¸­ç´š | DevOps è‡ªå‹•åŒ– |
| **Test-Driven Development with Python** | ä¸­ç´š | TDD æ–¹æ³•è«– |

### å·¥å…·èˆ‡åº«

| é¡åˆ¥ | æ¨è–¦å·¥å…· |
|------|----------|
| **ä¾è³´ç®¡ç†** | uv, pip, conda |
| **ä»£ç¢¼è³ªé‡** | Ruff, MyPy, Black |
| **æ¸¬è©¦** | pytest, pytest-cov, pytest-mock |
| **æ–‡ä»¶** | Sphinx, MkDocs, pdoc |
| **Web æ¡†æ¶** | FastAPI, Django, Flask |
| **æ•¸æ“šç§‘å­¸** | pandas, numpy, scikit-learn |
| **DevOps** | Docker, Kubernetes, GitHub Actions |

---

## ç¸½çµèˆ‡é—œéµè¦é»

### å·¥ç¨‹åŸå‰‡å›é¡§

1. **è‡ªå‹•åŒ–ä¸€åˆ‡**ï¼šç”¨å·¥å…·æ¶ˆé™¤é‡è¤‡å‹å‹•
2. **ä¸€è‡´æ€§è‡³ä¸Š**ï¼šæ¨™æº–åŒ–å·¥å…·ã€æµç¨‹å’Œä»£ç¢¼é¢¨æ ¼
3. **è³ªé‡å„ªå…ˆ**ï¼šå¾ç¬¬ä¸€å¤©èµ·æ³¨é‡è³ªé‡
4. **å®‰å…¨è¨­è¨ˆ**ï¼šå…¨æµç¨‹å¯¦æ–½å®‰å…¨æªæ–½
5. **æ€§èƒ½æ„è­˜**ï¼šç·¨å¯«é«˜æ•ˆä»£ç¢¼ä¸¦æ¸¬é‡æ€§èƒ½
6. **æ–‡ä»¶å³ä»£ç¢¼**ï¼šæŠŠæ–‡ä»¶è¦–ç‚ºä»£ç¢¼çš„ä¸€éƒ¨åˆ†
7. **æŒçºŒæ”¹é€²**ï¼šå®šæœŸæ›´æ–°ä¾è³´å’Œå¯¦è¸

### æ¨è–¦å·¥å…·æ£§ï¼ˆ2024ï¼‰

| ç›®çš„ | å·¥å…· | ç†ç”± |
|------|------|------|
| **ä¾è³´ç®¡ç†** | **uv** | 10-100å€é€Ÿåº¦ï¼Œå·¥å…·éˆä¸€é«”åŒ– |
| **é …ç›®é…ç½®** | **pyproject.toml** | æ¨™æº–ã€å…¨é¢é…ç½® |
| **ä»£ç¢¼è³ªé‡** | **Ruff + MyPy** | å¿«é€Ÿã€å…¨é¢ã€ç¾ä»£ |
| **æ¸¬è©¦** | **pytest** | åŠŸèƒ½è±å¯Œï¼Œæ’ä»¶ç”Ÿæ…‹ |
| **æ–‡ä»¶** | **Sphinx/MkDocs** | å°ˆæ¥­ã€è‡ªå‹•ç”Ÿæˆ |
| **CI/CD** | **GitHub Actions** | é›†æˆã€éˆæ´»ã€å…è²» |

### é·ç§»è·¯å¾‘

1. **å„ªå…ˆç”¨ uv**ï¼šç«‹å³æ›¿æ› pip
2. **çµ±ä¸€é…ç½®**ï¼šå°‡æ‰€æœ‰é…ç½®åˆä½µåˆ° pyproject.toml
3. **æ¡ç”¨ Ruff**ï¼šæ›¿æ›å¤šå·¥å…·ç‚º Ruff
4. **å®Œå–„æ¸¬è©¦**ï¼šé…ç½® pytest èˆ‡è¦†è“‹ç‡
5. **é›†æˆ CI/CD**ï¼šè‡ªå‹•åŒ–è³ªé‡èˆ‡éƒ¨ç½²
6. **å®Œå–„æ–‡ä»¶**ï¼šå‰µå»ºå…¨é¢æ–‡ä»¶

### ä¸‹ä¸€æ­¥å»ºè­°

1. **è©•ä¼°ç¾ç‹€**ï¼šåˆ†æç¾æœ‰å·¥å…·èˆ‡æµç¨‹
2. **åˆ¶å®šé·ç§»è¨ˆåŠƒ**ï¼šé€æ­¥æ¡ç”¨ç¾ä»£å¯¦è¸
3. **å°æ­¥å¿«è·‘**ï¼šå„ªå…ˆé«˜å½±éŸ¿è®Šæ›´ï¼ˆuvã€Ruffï¼‰
4. **è¡¡é‡æ•ˆæœ**ï¼šè·Ÿè¹¤é€Ÿåº¦ã€è³ªé‡èˆ‡é–‹ç™¼é«”é©—æå‡
5. **æŒçºŒè¿­ä»£**ï¼šä¸æ–·å„ªåŒ–å·¥ç¨‹å¯¦è¸

---

*æœ¬æŒ‡å—ç‚º Python å·¥ç¨‹å¯¦è¸çš„å…¨é¢ç¶œè¿°ã€‚å…·é«”å·¥å…·å’Œé…ç½®ç´°ç¯€è«‹åƒè€ƒæ–‡ä¸­éˆæ¥çš„å°ˆç”¨æŒ‡å—ã€‚*